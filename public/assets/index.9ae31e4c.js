var O=Object.defineProperty,q=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var _=(t,s,r)=>s in t?O(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,v=(t,s)=>{for(var r in s||(s={}))D.call(s,r)&&_(t,r,s[r]);if(E)for(var r of E(s))R.call(s,r)&&_(t,r,s[r]);return t},P=(t,s)=>q(t,G(s));var T=(t,s)=>{var r={};for(var l in t)D.call(t,l)&&s.indexOf(l)<0&&(r[l]=t[l]);if(t!=null&&E)for(var l of E(t))s.indexOf(l)<0&&R.call(t,l)&&(r[l]=t[l]);return r};import{j,O as z,a as H,r as d,L as C,N as U,u as V,B as K,R as W,b as S,c as X,d as Y}from"./vendor.f8a02f5e.js";const J=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const m of o)if(m.type==="childList")for(const g of m.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&l(g)}).observe(document,{childList:!0,subtree:!0});function r(o){const m={};return o.integrity&&(m.integrity=o.integrity),o.referrerpolicy&&(m.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?m.credentials="include":o.crossorigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function l(o){if(o.ep)return;o.ep=!0;const m=r(o);fetch(o.href,m)}};J();const e=j.exports.jsx,a=j.exports.jsxs,f=j.exports.Fragment,Q=()=>e(f,{children:e("main",{className:"container mx-auto md:grid md:grid-cols-2 mt-12 gap-10 p-5 items-center",children:e(z,{})})}),N=H.create({baseURL:"https://vet-app-server-production.up.railway.app/api"}),L=d.exports.createContext(),Z=({children:t})=>{const[s,r]=d.exports.useState(!0),[l,o]=d.exports.useState({});d.exports.useEffect(()=>{(async()=>{const c=localStorage.getItem("token");if(!c){r(!1);return}const u={headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`}};try{const{data:i}=await N("/veterinarios/perfil",u);o(i)}catch(i){console.log(i.response.data.msg),o({})}r(!1)})()},[]);const m=()=>{localStorage.removeItem("token"),o({})},g=async n=>{const c=localStorage.getItem("token");if(!c){r(!1);return}const u={headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`}};try{const i=`/veterinarios/perfil/${n._id}`;return await N.put(i,n,u),{msg:"Almacenado Correctamente"}}catch(i){return{msg:i.response.data.msg,error:!0}}},h=async n=>{const c=localStorage.getItem("token");if(!c){r(!1);return}const u={headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`}};try{const i="/veterinarios/actualizar-password",{data:p}=await N.put(i,n,u);return console.log(p),{msg:p.msg}}catch(i){return{msg:i.response.data.msg,error:!0}}};return e(L.Provider,{value:{auth:l,setAuth:o,cargando:s,cerrarSesion:m,actualizarPerfil:g,guardarPassword:h},children:t})},k=()=>d.exports.useContext(L),ee=()=>{const{cerrarSesion:t}=k();return e("header",{className:"py-10 bg-indigo-600",children:a("div",{className:"container mx-auto flex flex-col lg:flex-row justify-between items-center",children:[a("h1",{className:"font-bold text-2xl text-indigo-200 text-center",children:["Administrador de Pacientes de ","",e("span",{className:"text-white font-black",children:"Veterinaria"})]}),a("nav",{className:"flex flex-col items-center lg:flex-row gap-4 mt-5 lg:mt-0",children:[e(C,{to:"/admin",className:"text-white text-sm uppercase font-bold",children:"Pacientes"}),e(C,{to:"/admin/perfil",className:"text-white text-sm uppercase font-bold",children:"Perfil"}),e("button",{type:"button",className:"text-white text-sm uppercase font-bold",onClick:t,children:"Cerrar Sesi\xF3n"})]})]})})},te=()=>e("footer",{className:"py-10",children:a("p",{className:"text-center font-bold",children:["APV - Administrador de Pacientes de ","",e("span",{className:"text-indigo-600",children:"Veterinaria"})]})}),ae=()=>{const{auth:t,cargando:s}=k();return s?"cargando...":a(f,{children:[e(ee,{}),(t==null?void 0:t._id)?e("main",{className:"container mx-auto mt-10",children:e(z,{})}):e(U,{to:"/"}),e(te,{})]})},A=({alerta:t})=>e("div",{className:`${t.error?"from-red-400 to-red-600":"from-indigo-400 to-indigo-600"} bg-gradient-to-br text-center p-3 rounded-xl uppercase text-white font-bold text-sm mb-10`,children:t.msg}),re=()=>{const[t,s]=d.exports.useState(""),[r,l]=d.exports.useState(""),[o,m]=d.exports.useState({}),{setAuth:g}=k(),h=V(),n=async u=>{if(u.preventDefault(),[t,r].includes("")){m({msg:"Todos los campos son obligatorios",error:!0});return}try{const{data:i}=await N.post("/veterinarios/login",{email:t,password:r});localStorage.setItem("token",i.token),g(i),h("/admin")}catch(i){m({msg:i.response.data.msg,error:!0})}},{msg:c}=o;return a(f,{children:[e("div",{children:a("h1",{className:"text-indigo-600 font-black text-6xl",children:["Inicia Sesi\xF3n y Administra tus  ","",e("span",{className:"text-black",children:" Pacientes"})]})}),a("div",{className:"mt-20 md:mt-5 shadow-lg px-5 py-10 rounded-xl bg-white",children:[c&&e(A,{alerta:o}),a("form",{onSubmit:n,children:[a("div",{className:"my-5",children:[e("label",{className:"uppercase text-gray-600 block text-xl font-bold",children:"Email"}),e("input",{type:"email",placeholder:"Email de Registro",className:"border w-full p-3 mt-3 bg-gray-50 rounded-xl",value:t,onChange:u=>s(u.target.value)})]}),a("div",{className:"my-5",children:[e("label",{className:"uppercase text-gray-600 block text-xl font-bold",children:"Password"}),e("input",{type:"password",placeholder:"Tu Password",className:"border w-full p-3 mt-3 bg-gray-50 rounded-xl",value:r,onChange:u=>l(u.target.value)})]}),e("input",{type:"submit",value:"Iniciar Sesi\xF3n",className:"bg-indigo-700 w-full py-3 px-10 rounded-xl text-white uppercase font-bold mt-5 hover:cursor-pointer hover:bg-indigo-800 md:w-auto "})]}),e("nav",{className:"mt-10 lg:flex lg:justify-between",children:e(C,{className:"block text-center my-5 text-gray-500",to:"/registrar",children:"\xBFNo tienes una cuenta? Reg\xEDstrate"})})]})]})},se=()=>{const[t,s]=d.exports.useState(""),[r,l]=d.exports.useState(""),[o,m]=d.exports.useState(""),[g,h]=d.exports.useState(""),[n,c]=d.exports.useState({}),u=async p=>{if(p.preventDefault(),[t,r,o,g].includes("")){c({msg:"Hay campos vacios",error:!0});return}if(o!==g){c({msg:"Los Password no son iguales",error:!0});return}if(o.length<6){c({msg:"El Password es muy corto, agrega minimo 6 caracteres",error:!0});return}c({});try{await N.post("/veterinarios",{nombre:t,email:r,password:o}),c({msg:"Creado Correctamente, Inicia sesion",error:!1})}catch(y){c({msg:y.response.data.msg,error:!0})}},{msg:i}=n;return a(f,{children:[e("div",{children:a("h1",{className:"text-indigo-600 font-black text-6xl",children:["Crea tu Cuenta y Administra ","",e("span",{className:"text-black",children:"tus Pacientes"})]})}),a("div",{className:"mt-20 md:mt-5 shadow-lg px-5 py-10 rounded-xl bg-white",children:[i&&e(A,{alerta:n}),a("form",{onSubmit:u,children:[a("div",{className:"my-5",children:[e("label",{className:"uppercase text-gray-600 block text-xl font-bold",children:"Nombre"}),e("input",{type:"text",placeholder:"Tu Nombre",className:"border w-full p-3 mt-3 bg-gray-50 rounded-xl",value:t,onChange:p=>s(p.target.value)})]}),a("div",{className:"my-5",children:[e("label",{className:"uppercase text-gray-600 block text-xl font-bold",children:"Email"}),e("input",{type:"email",placeholder:"Email de Registro",className:"border w-full p-3 mt-3 bg-gray-50 rounded-xl",value:r,onChange:p=>l(p.target.value)})]}),a("div",{className:"my-5",children:[e("label",{className:"uppercase text-gray-600 block text-xl font-bold",children:"Password"}),e("input",{type:"password",placeholder:"Tu Password",className:"border w-full p-3 mt-3 bg-gray-50 rounded-xl",value:o,onChange:p=>m(p.target.value)})]}),a("div",{className:"my-5",children:[e("label",{className:"uppercase text-gray-600 block text-xl font-bold",children:"Repetir Password"}),e("input",{type:"password",placeholder:"Repite tu Password",className:"border w-full p-3 mt-3 bg-gray-50 rounded-xl",value:g,onChange:p=>h(p.target.value)})]}),e("input",{type:"submit",value:"Crear Cuenta",className:"bg-indigo-700 w-full py-3 px-10 rounded-xl text-white uppercase font-bold mt-5 hover:cursor-pointer hover:bg-indigo-800 md:w-auto "})]}),e("nav",{className:"mt-10 lg:flex lg:justify-between",children:e(C,{className:"block text-center my-5 text-gray-500",to:"/",children:"\xBFYa tienes una cuenta? Inicia Sesi\xF3n"})})]})]})},B=d.exports.createContext(),oe=({children:t})=>{const[s,r]=d.exports.useState([]),[l,o]=d.exports.useState({});d.exports.useEffect(()=>{(async()=>{try{const c=localStorage.getItem("token");if(!c)return;const u={headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`}},{data:i}=await N("/pacientes",u);r(i)}catch(c){console.log(c)}})()},[]);const m=async n=>{const c=localStorage.getItem("token"),u={headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`}};if(n.id)try{const{data:p}=await N.put(`/pacientes/${n.id}`,n,u),y=s.map(w=>w._id===p._id?p:w);r(y)}catch(p){console.log(p)}else try{const{data:p}=await N.post("/pacientes",n,u),i=p,{createdAt:y,updatedAt:w,__v:x}=i,F=T(i,["createdAt","updatedAt","__v"]);r([F,...s])}catch(p){console.log(p.response.data.msg)}},g=n=>{o(n)},h=async n=>{if(confirm("\xBFConfirmas que deseas eliminar ?"))try{const u=localStorage.getItem("token"),i={headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`}},{data:p}=await N.delete(`/pacientes/${n}`,i),y=s.filter(w=>w._id!==n);r(y)}catch(u){console.log(u)}};return e(B.Provider,{value:{pacientes:s,guardarPaciente:m,setEdicion:g,paciente:l,eliminarPaciente:h},children:t})},I=()=>d.exports.useContext(B),ne=()=>{const[t,s]=d.exports.useState(""),[r,l]=d.exports.useState(""),[o,m]=d.exports.useState(""),[g,h]=d.exports.useState(""),[n,c]=d.exports.useState(""),[u,i]=d.exports.useState(null),[p,y]=d.exports.useState({}),{guardarPaciente:w,paciente:x}=I();d.exports.useEffect(()=>{(x==null?void 0:x.nombre)&&(s(x.nombre),l(x.propietario),m(x.email),h(x.fecha),c(x.sintomas),i(x._id))},[x]);const F=b=>{if(b.preventDefault(),[t,r,o,g,n].includes("")){y({msg:"Todos los campos son obligatorios",error:!0});return}w({nombre:t,propietario:r,email:o,fecha:g,sintomas:n,id:u}),y({msg:"Guardado Correctamente"}),s(""),l(""),m(""),h(""),c(""),i("")},{msg:M}=p;return a(f,{children:[e("h2",{className:"font-black text-3xl text-center",children:"Administrador de Pacientes"}),a("p",{className:"text-xl mt-5 mb-10 text-center",children:["A\xF1ade tus pacientes y ","",e("span",{className:"text-indigo-600 font-bold",children:"Administralos"})]}),a("form",{className:"bg-white py-10 px-5 mb-10 lg:mb-5 shadow-md rounded-md",onSubmit:F,children:[a("div",{className:"mb-5",children:[e("label",{htmlFor:"nombre",className:"text-gray-700 uppercase font-bold",children:"Nombre Mascota"}),e("input",{id:"nombre",type:"text",placeholder:"Nombre de la Mascota",className:"border-2 w-full p-2 mt-2 placeholder-gray-400 rounded-md",value:t,onChange:b=>s(b.target.value)})]}),a("div",{className:"mb-5",children:[e("label",{htmlFor:"propietario",className:"text-gray-700 uppercase font-bold",children:"Nombre Propietario"}),e("input",{id:"propietario",type:"text",placeholder:"Nombre del Propietario",className:"border-2 w-full p-2 mt-2 placeholder-gray-400 rounded-md",value:r,onChange:b=>l(b.target.value)})]}),a("div",{className:"mb-5",children:[e("label",{htmlFor:"email",className:"text-gray-700 uppercase font-bold",children:"Email Propietario"}),e("input",{id:"email",type:"email",placeholder:"Email del Propietario",className:"border-2 w-full p-2 mt-2 placeholder-gray-400 rounded-md",value:o,onChange:b=>m(b.target.value)})]}),a("div",{className:"mb-5",children:[e("label",{htmlFor:"fecha",className:"text-gray-700 uppercase font-bold",children:"Fecha Alta"}),e("input",{id:"fecha",type:"date",className:"border-2 w-full p-2 mt-2 placeholder-gray-400 rounded-md",value:g,onChange:b=>h(b.target.value)})]}),a("div",{className:"mb-5",children:[e("label",{htmlFor:"sintomas",className:"text-gray-700 uppercase font-bold",children:"S\xEDntomas"}),e("textarea",{id:"sintomas",placeholder:"Describe los S\xEDntomas",className:"border-2 w-full p-2 mt-2 placeholder-gray-400 rounded-md",value:n,onChange:b=>c(b.target.value)})]}),e("input",{type:"submit",className:"bg-indigo-600 w-full p-3 text-white uppercase font-bold hover:bg-indigo-700 cursor-pointer transition-colors",value:u?"Guardar Cambios":"Agregar Paciente"})]}),M&&e(A,{alerta:p})]})},le=({paciente:t})=>{const{setEdicion:s,eliminarPaciente:r}=I(),{email:l,fecha:o,nombre:m,propietario:g,sintomas:h,_id:n}=t;return a("div",{className:"mx-5 my-10 bg-white shadow-md px-5 py-10 rounded-xl",children:[a("p",{className:"font-bold uppercase text-indigo-700 my-2",children:["Nombre: ","",e("span",{className:"font-normal normal-case text-black",children:m})]}),a("p",{className:"font-bold uppercase text-indigo-700 my-2",children:["Propietario: ","",e("span",{className:"font-normal normal-case text-black",children:g})]}),a("p",{className:"font-bold uppercase text-indigo-700 my-2",children:["Email Contacto: ","",e("span",{className:"font-normal normal-case text-black",children:l})]}),a("p",{className:"font-bold uppercase text-indigo-700 my-2",children:["Fecha de Alta: ","",e("span",{className:"font-normal normal-case text-black",children:(u=>{const i=new Date(u);return new Intl.DateTimeFormat("es-MX",{dateStyle:"long"}).format(i)})(o)})]}),a("p",{className:"font-bold uppercase text-indigo-700 my-2",children:["S\xEDntomas: ","",e("span",{className:"font-normal normal-case text-black",children:h})]}),a("div",{className:"flex justify-between my-5",children:[e("button",{type:"button",className:"py-2 px-10 bg-indigo-600 hover:bg-indigo-700 text-white uppercase font-bold  rounded-lg",onClick:()=>s(t),children:"Editar"}),e("button",{type:"button",className:"py-2 px-10 bg-red-600 hover:bg-red-700 text-white uppercase font-bold  rounded-lg",onClick:()=>r(n),children:"Eliminar"})]})]})},ce=()=>{const{pacientes:t}=I();return e(f,{children:t.length?a(f,{children:[e("h2",{className:"font-black text-3xl text-center",children:"Listado Pacientes"}),a("p",{className:"text-xl mt-5 mb-10 text-center",children:["Administra tus ","",e("span",{className:"text-indigo-600 font-bold",children:"Pacientes y Citas"})]}),t.map(s=>e(le,{paciente:s},s._id))]}):a(f,{children:[e("h2",{className:"font-black text-3xl text-center",children:"No Hay Pacientes"}),a("p",{className:"text-xl mt-5 mb-10 text-center",children:["Comienza agregando pacientes ","",e("span",{className:"text-indigo-600 font-bold",children:"y aparecer\xE1n en este lugar"})]})]})})},ie=()=>{const[t,s]=d.exports.useState(!1);return a("div",{className:"flex flex-col md:flex-row",children:[e("button",{type:"button",className:"bg-indigo-600 text-white font-bold uppercase mx-10 p-3 rounded-md mb-10 md:hidden",onClick:()=>s(!t),children:t?"Ocultar Formulario":"Mostrar Formulario"}),e("div",{className:`${t?"block":"hidden"} md:block md:w-1/2 lg:w-2/5 `,children:e(ne,{})}),e("div",{className:"md:w-1/2 lg:w-3/5",children:e(ce,{})})]})},$=()=>a("nav",{className:"flex gap-3",children:[e(C,{to:"/admin/perfil",className:"font-bold uppercase text-gray-500",children:"Perfil"}),e(C,{to:"/admin/cambiar-password",className:"font-bold uppercase text-gray-500",children:"Cambiar Password"})]}),de=()=>{const{auth:t,actualizarPerfil:s}=k(),[r,l]=d.exports.useState({}),[o,m]=d.exports.useState({});d.exports.useEffect(()=>{l(t)},[t]);const g=async n=>{n.preventDefault();const{nombre:c,email:u}=r;if([c,u].includes("")){m({msg:"Email y Nombre son obligatorios",error:!0});return}const i=await s(r);m(i)},{msg:h}=o;return a(f,{children:[e($,{}),e("h2",{className:"font-black text-3xl text-center mt-10",children:"Editar Perfil"}),a("p",{className:"text-xl mt-5 mb-10 text-center",children:["Modifica tu ","",e("span",{className:"text-indigo-600 font-bold",children:"Informaci\xF3n aqu\xED"})]}),e("div",{className:"flex justify-center",children:a("div",{className:"w-full md:w-1/2 bg-white shadow rounded-lg p-5",children:[h&&e(A,{alerta:o}),a("form",{onSubmit:g,children:[a("div",{className:"my-3",children:[e("label",{className:"uppercase font-bold text-gray-600",children:"Nombre"}),e("input",{type:"text",className:"border bg-gray-50 w-full p-2 mt-5 rounded-lg",name:"nombre",value:r.nombre||"",onChange:n=>l(P(v({},r),{[n.target.name]:n.target.value}))})]}),a("div",{className:"my-3",children:[e("label",{className:"uppercase font-bold text-gray-600",children:"Sitio Web"}),e("input",{type:"text",className:"border bg-gray-50 w-full p-2 mt-5 rounded-lg",name:"web",value:r.web||"",onChange:n=>l(P(v({},r),{[n.target.name]:n.target.value}))})]}),a("div",{className:"my-3",children:[e("label",{className:"uppercase font-bold text-gray-600",children:"Tel\xE9fono"}),e("input",{type:"text",className:"border bg-gray-50 w-full p-2 mt-5 rounded-lg",name:"telefono",value:r.telefono||"",onChange:n=>l(P(v({},r),{[n.target.name]:n.target.value}))})]}),a("div",{className:"my-3",children:[e("label",{className:"uppercase font-bold text-gray-600",children:"Email"}),e("input",{type:"text",className:"border bg-gray-50 w-full p-2 mt-5 rounded-lg",name:"email",value:r.email||"",onChange:n=>l(P(v({},r),{[n.target.name]:n.target.value}))})]}),e("input",{type:"submit",value:"Guardar Cambios",className:"bg-indigo-700 px-10 py-3 font-bold text-white rounded-lg uppercase w-full mt-5"})]})]})})]})},me=()=>{const{guardarPassword:t}=k(),[s,r]=d.exports.useState({}),[l,o]=d.exports.useState({pwd_actual:"",pwd_nuevo:""}),m=async h=>{if(h.preventDefault(),Object.values(l).some(c=>c==="")){r({msg:"Todos los campos son obligatorios",error:!0});return}if(l.pwd_nuevo.length<6){r({msg:"El Password debe tener m\xEDnimo 6 caracteres",error:!0});return}const n=await t(l);r(n)},{msg:g}=s;return a(f,{children:[e($,{}),e("h2",{className:"font-black text-3xl text-center mt-10",children:"Cambiar Password"}),a("p",{className:"text-xl mt-5 mb-10 text-center",children:["Modifica tu ","",e("span",{className:"text-indigo-600 font-bold",children:"Password aqu\xED"})]}),e("div",{className:"flex justify-center",children:a("div",{className:"w-full md:w-1/2 bg-white shadow rounded-lg p-5",children:[g&&e(A,{alerta:s}),a("form",{onSubmit:m,children:[a("div",{className:"my-3",children:[e("label",{className:"uppercase font-bold text-gray-600",children:"Password Actual"}),e("input",{type:"password",className:"border bg-gray-50 w-full p-2 mt-5 rounded-lg",name:"pwd_actual",placeholder:"Escribe tu password actual",onChange:h=>o(P(v({},l),{[h.target.name]:h.target.value}))})]}),a("div",{className:"my-3",children:[e("label",{className:"uppercase font-bold text-gray-600",children:"Password Nuevo"}),e("input",{type:"password",className:"border bg-gray-50 w-full p-2 mt-5 rounded-lg",name:"pwd_nuevo",placeholder:"Escribe tu nuevo password",onChange:h=>o(P(v({},l),{[h.target.name]:h.target.value}))})]}),e("input",{type:"submit",value:"Actualizar Password",className:"bg-indigo-700 px-10 py-3 font-bold text-white rounded-lg uppercase w-full mt-5"})]})]})})]})};function ue(){return e(K,{children:e(Z,{children:e(oe,{children:a(W,{children:[a(S,{path:"/",element:e(Q,{}),children:[e(S,{index:!0,element:e(re,{})}),e(S,{path:"registrar",element:e(se,{})})]}),a(S,{path:"/admin",element:e(ae,{}),children:[e(S,{index:!0,element:e(ie,{})}),e(S,{path:"perfil",element:e(de,{})}),e(S,{path:"cambiar-password",element:e(me,{})})]})]})})})})}X.render(e(Y.StrictMode,{children:e(ue,{})}),document.getElementById("root"));
